webpackJsonp([6,16],{"views/shared/singlevalue/Master":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/shared/viz/Base"),i("views/shared/singlevalue/Sparkline"),i("views/shared/singlevalue/MainBody"),i("views/shared/singlevalue/UnderLabel"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("uri/route"),i("util/drilldown"),i("util/time"),i("util/color_utils"),i("js_charting/util/parsing_utils"),i("util/general_utils"),i("util/moment/relative"),i("util/numeral")],a=function(e,t,i,s,a,n,l,r,o,h,d,u,c,g,p,f,m,v){return s.extend({moduleId:i.id,className:"single-value",SEVERITY_COLORS:{severe:"#d93f3c",high:"#f58f39",elevated:"#f7bc38",guarded:"#6db7c6",low:"#65a637",none:"#555555"},SEVERITIES:["none","low","guarded","elevated","high","severe"],BLOCK_DEFAULT_FONT_COLOR:"#FFFFFF",DEFAULT_FONT_COLOR:"#333333",UNDERLABEL_COLOR:"#555555",NEUTRAL_CHANGE_COLOR:"#555555",DELTA_GREEN:"#65a637",DELTA_RED:"#d93f3c",EDGE_PADDING:32,NEUTRAL_SPARKLINE_COLOR:"#999999",MAX_RESULT_COUNT:1e3,initialize:function(t){s.prototype.initialize.apply(this,arguments),this.$el.width(this.options.width||"100%"),this.$el.height(this.options.height||"100%"),this.$el.css("position","relative"),this.model.results=new r({searchResultsColumn:this.model.searchData,resultField:"",resultFieldValue:""}),this.model.presentation=new r,this.updateContainerDimensions(),this.originalHeight=this.$el.height(),this.model.presentation.set({fontColor:this.getFontColor(),scaleRatio:1,edgePadding:this.EDGE_PADDING}),this.$inlineMessage=e('<div class="inline-message"></div>').css({"text-align":"center",height:"32px",width:"100%",position:"absolute",bottom:"0"}).addClass(this.options.messageContainerClass||"")},onConfigChange:function(e){var i=t(e).chain().keys().any(function(e){return 0===e.indexOf("display.visualizations.singlevalue.")}).value();i&&this.invalidate("formatDataPass")},updateResultState:function(){var e,t,i,s=this.determineResultFieldName(this.model.config.get("display.visualizations.singlevalue.field")),a=this.getFieldValue(s);this.model.results.set("resultField",s),this.model.results.set("resultFieldValue",a),this.isTimeSeries()&&!isNaN(a)?(e=this.getFieldValues(s),this.model.results.set("sparkline",e),this.setDeltaValue(a),this.model.config.set("is_timeseries",!0,{transient:!0})):(this.model.results.unset("sparkline"),this.model.results.unset("deltaValue"),this.model.results.unset("deltaBacktrack"),this.model.config.set("is_timeseries",!1,{transient:!0})),this.severityColor=this.getSeverityColor(a),this.deltaColor=this.getDeltaColor(a),i=this.getDeltaIndicatorColor(),t=this.useColors()&&"trend"===this.model.config.get("display.visualizations.singlevalue.colorBy")||this.hasBackground()?i:this.NEUTRAL_SPARKLINE_COLOR,this.model.presentation.set("deltaColor",i),this.model.presentation.set("sparklineColor",t),this.model.presentation.set("fontColor",this.getFontColor()),this.model.presentation.set("formatPattern",this.getFormatPattern())},getDeltaColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.trendColorInterpretation")||"standard",t=this.model.results.get("deltaValue"),i="percentageIncrease"===t||t>0;return 0===t?this.NEUTRAL_CHANGE_COLOR:"inverse"===e?i?this.DELTA_RED:this.DELTA_GREEN:i?this.DELTA_GREEN:this.DELTA_RED},getSeverityColor:function(e){var t,i,s,a,n=this.model.config.get("display.visualizations.singlevalue.rangeValues"),l=this.model.config.get("display.visualizations.singlevalue.rangeColors"),r=o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.useColors"))||!1,h=this.getResultField("range");if(h&&!r)return this.SEVERITY_COLORS[h]||this.DEFAULT_FONT_COLOR;if(n){if(t=p.stringToArray(n),i=p.stringToArray(l),s=i.length>0,0===t.length||isNaN(e))return this.DEFAULT_FONT_COLOR;a=this.SEVERITIES.slice(1,6);for(var d=0;d<t.length;d++){if(isNaN(t[d]))return this.DEFAULT_FONT_COLOR;if(parseFloat(e)<=parseFloat(t[d]))return s?g.replaceSymbols(i[d],"#")||this.DEFAULT_FONT_COLOR:this.SEVERITY_COLORS[a[d]]}return s?g.replaceSymbols(i[t.length],"#")||this.DEFAULT_FONT_COLOR:this.SEVERITY_COLORS[a[a.length-1]]}return this.DEFAULT_FONT_COLOR},getDeltaIndicatorColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorBy");return this.hasBackground()?this.BLOCK_DEFAULT_FONT_COLOR:"value"!==e&&this.useColors()?this.deltaColor:this.DEFAULT_FONT_COLOR},getFontColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorBy");return this.hasBackground()?this.BLOCK_DEFAULT_FONT_COLOR:"trend"===e&&this.isTimeSeries()||!this.useColors()?this.DEFAULT_FONT_COLOR:this.severityColor},useColors:function(){var e=o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.useColors"))||!1,t=this.getFieldValues("range");return!(!t||e)||e},hasBackground:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorMode");return"block"===e&&this.useColors()&&this.getBackgroundColor()},getBackgroundColor:function(){var e=this.model.config.get("display.visualizations.singlevalue.colorBy");return this.useColors()?"trend"===e?this.deltaColor:this.severityColor:this.DEFAULT_FONT_COLOR},getFormatPattern:function(){var e,t,i="0",s=this.model.config.get("display.visualizations.singlevalue.numberPrecision"),a=o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.useThousandSeparators"));return a!==!1&&(i+=",0"),s&&(e=s.match(/^0\.?(0*)$/),e&&2===e.length&&(t=e[1],t.length>4&&(t="0000"),t.length>0&&(i=i+"."+t))),i},setDeltaValue:function(e){var i,s,a,n,l,r,o,h,d,u,g,p,f,b=this.model.config.get("display.visualizations.singlevalue.trendInterval"),L=this.model.config.get("display.visualizations.singlevalue.trendDisplayMode"),y=this.getFieldValues("_time"),x=this.model.results.get("resultField"),w=this.getFormatPattern(),C=function(e){return c.bdTimeToDateObject(c.extractBdTime(y[y.length-e]))};if(b&&"auto"!==b){try{i=m.parseRelativeTimeExpression(b)}catch(e){return}if(i&&i[0]&&(s=i[0]),y.length>=2&&s&&s.unit&&!isNaN(s.amount)){if(f=c.normalizeUnit(s.unit),p=Math.abs(s.amount),h=C(1),u=C(1),d=C(2),g=(h.getTime()-d.getTime())/1e3,t.indexOf(["s","m","h"],f)!==-1)r=c.convertAmountAndUnitToSeconds(p,f);else{switch(f){case"y":u.setFullYear(u.getFullYear()-p);break;case"q":u.setMonth(u.getMonth()-3*p);break;case"mon":u.setMonth(u.getMonth()-p);break;case"w":u.setDate(u.getDate()-7*p);break;case"d":u.setDate(u.getDate()-p);break;default:return u=void 0}u&&(r=(h.getTime()-u)/1e3)}r&&(o=Math.round(r/g),o<y.length&&(a=this.calculateDeltaValue(x,o,L,e),n=o))}}a||0===a||(a=this.calculateDeltaValue(x,1,L,e),n=1),w&&!isNaN(a)&&(l=v(a).format(w),this.model.results.set("formattedDeltaValue",l)),this.model.results.set("deltaValue",a),this.model.results.set("deltaBacktrack",n)},calculateDeltaValue:function(e,t,i,s){var a=this.getFieldValue(e,t);return i&&"percent"===i.toLowerCase()?"0"===a?"0"===s?0:s>a?"percentageIncrease":"percentageDecrease":(s-a)/a*100:s-a},onAddedToDocument:function(){s.prototype.onAddedToDocument.apply(this,arguments),this.validateReflow(!0)},reflow:function(){this.updateContainerDimensions(),this.updateBackgroundDimensions(),this.invokeOnChildren("validateReflow",!0)},updateContainerDimensions:function(){var e,t=this.getSvgContainer();this.model.config.get("exportMode")?(this.svgWidth=this.options.width,this.svgHeight=this.options.height):(this.svgHeight=this.$el.height(),this.svgWidth=this.$el.width()),1==this.$el.find(this.$inlineMessage).length&&(this.svgHeight=this.svgHeight-this.$inlineMessage.height()),f.valuesAreNumericAndFinite([this.svgHeight,this.svgWidth])&&(t.height(this.svgHeight).width(this.svgWidth),e=this.svgHeight/this.originalHeight,f.valuesAreNumericAndFinite([e])&&0!==e||(e=1),this.model.presentation.set({svgWidth:this.svgWidth,svgHeight:this.svgHeight,scaleRatio:e}))},getResultField:function(e){var i=this.getFieldValue(this.determineResultFieldName(e));return i?i:t("N/A").t()},getFieldNames:function(){var i=this.model.searchData.get("fields");return i&&0!==i.length?t.isObject(i[0])?t(i).pluck("name"):e.extend([],i):[]},getFieldValue:function(e,t){var i=this.getFieldValues(e);return t||(t=0),i&&i.length?this.isTimeSeries()?i[i.length-t-1]:i[t]:""},getFieldValues:function(e){var i=this.getFieldNames(),s=this.model.searchData.get("columns")||[],a=t(i).indexOf(e);return s[a]},determineResultFieldName:function(e){var i=this.getFieldNames();return e&&t(i).contains(e)?e:t(i).find(function(e){return"_raw"===e||"_"!==e[0]})},isTimeSeries:function(){var e=this.getFieldNames();return t(e).some(function(e){return"_time"===e})},getSvgContainer:function(){return this.$(".svg-container")},getBackgroundMode:function(){return this.model.config.get("display.visualizations.singlevalue.colorMode")||"none"},updateBackgroundDimensions:function(){var e;this.hasBackground()&&(e=this.getSvgContainer().find(".block-background"),e.length>0&&(e.attr("width",this.svgWidth),e.attr("height",this.svgHeight)))},drawSeverityBackground:function(e){this.hasBackground()&&e.append(h.createElement("rect").attr({x:0,y:0,width:this.svgWidth,height:this.svgHeight,class:"block-background",fill:this.getBackgroundColor()}))},drawSvgContainer:function(){var e=this.getSvgContainer();return e.length>0&&e.remove(),e=h.createElement("svg").width(this.svgWidth).height(this.svgHeight).attr("class","svg-container").css("position","absolute").css("top","0").css("left","0"),e.appendTo(this.el),e},drawSparkline:function(e){this.children.sparkline&&(this.children.sparkline.detach(),this.children.sparkline.remove()),this.hasSparkline?(this.model.results.set({sparklineData:this.model.results.get("sparkline").slice(0)}),this.model.presentation.set({sparklineOpacity:1}),this.children.sparkline=new a({model:{presentation:this.model.presentation,results:this.model.results,state:this.model.config}}),this.children.sparkline.render().appendTo(e)):this.model.results.unset("sparklineData")},drawMainBody:function(e){var t,i,s,a,l,r=this.model.config.get("display.visualizations.singlevalue.underLabel");this.children.mainBody&&(this.children.mainBody.detach(),this.children.mainBody.remove()),this.hasSparkline&&r?(a=50,l=28,t=50,i=20,s=.85):(a=66,l=37,i=26,s=1.1,t=this.hasSparkline||r?60:70),this.model.presentation.set({singleValueFontSize:a,sideLabelFontSize:l,mainBodyPadding:t,deltaFontSize:i,deltaScale:s}),this.children.mainBody=new n({model:{application:this.model.application,state:this.model.config,results:this.model.results,presentation:this.model.presentation}}),this.listenTo(this.children.mainBody,"singleDrilldownClicked",function(e){this.handleSingleDrilldownClicked(e)}),this.listenTo(this.children.mainBody,"anchorTagClicked",function(e){this.handleAnchorTagClicked(e)}),this.children.mainBody.render().appendTo(e)},handleSingleDrilldownClicked:function(e){this.trigger(e.specificEventNames,e.drilldownInfo)},handleAnchorTagClicked:function(t){var i=e(t.currentTarget).attr("href");i&&d.redirectTo(i,u.shouldDrilldownInNewTab(t))},drawUnderLabel:function(e){var t,i=this.hasBackground()?this.BLOCK_DEFAULT_FONT_COLOR:this.UNDERLABEL_COLOR,s=this.hasBackground()?.8:1;t=this.hasSparkline?72:85,this.children.underLabel&&(this.children.underLabel.detach(),this.children.underLabel.remove()),this.model.presentation.set({underLabelY:t,underLabelColor:i,underLabelOpacity:s}),this.children.underLabel=new l({model:{state:this.model.config,results:this.model.results,presentation:this.model.presentation,application:this.model.application}}),this.listenTo(this.children.underLabel,"singleDrilldownClicked",function(e){this.handleSingleDrilldownClicked(e)}),this.listenTo(this.children.underLabel,"anchorTagClicked",function(e){this.handleAnchorTagClicked(e)}),this.children.underLabel.render().appendTo(e)},drawComponents:function(){var e=this.drawSvgContainer();this.hasSparkline=this.model.results.get("sparkline")&&o.normalizeBoolean(this.model.config.get("display.visualizations.singlevalue.showSparkline"))!==!1,this.model.presentation.set("hasSparkline",this.hasSparkline),this.drawSeverityBackground(e),this.drawMainBody(e),this.model.config.get("display.visualizations.singlevalue.underLabel")&&this.drawUnderLabel(e),this.drawSparkline(e)},renderMaxResultCountMessage:function(e){var i=o.sprintf(t("These results may be truncated. This visualization is configured to display a maximum of %s results per series, and that limit has been reached.").t(),e);this.$inlineMessage.html(t(this.inlineMessageTemplate).template({message:i,level:"warning"}))},inlineMessageTemplate:'\t                <div class="alert alert-inline alert-<%= level %> alert-inline"> \t                    <i class="icon-alert"></i> \t                    <%- message %> \t                </div> \t            ',updateView:function(){this.updateResultState(),this.$el.removeClass(this._dynamicClasses||""),this._dynamicClasses=[this.model.config.get("display.visualizations.singlevalue.additionalClass"),this.getFieldValue(this.model.config.get("display.visualizations.singlevalue.classField"))].join(" "),this.$el.addClass(this._dynamicClasses),this.drawComponents(),this.$inlineMessage.remove(),this.model.searchDataParams&&(this.MAX_RESULT_COUNT=this.model.searchDataParams.get("count")),this.model.results.get("sparkline")&&this.model.results.get("sparkline").length>=this.MAX_RESULT_COUNT&&(this.renderMaxResultCountMessage(this.MAX_RESULT_COUNT),this.$inlineMessage.insertAfter(this.$(".svg-container"))),this.isAddedToDocument()&&this.reflow()}})}.apply(t,s),!(void 0!==a&&(e.exports=a))},"js_charting/util/color_utils":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),i("shim/splunk.util")],a=function(e,t,i){var s=function(e,i){if("number"!=typeof e&&(e=parseInt(e,16)),t(e).isNaN()||e<0||e>16777215)return null;var s=(16711680&e)>>16,a=(65280&e)>>8,n=255&e;return void 0===i?"rgb("+s+","+a+","+n+")":"rgba("+s+","+a+","+n+","+i+")"},a=function(e){var t=e.split(","),i=t[0].charAt(3);return"a"===i?(t[0]=t[0].replace("rgba","rgb"),t[t.length-1]=")",t=t.join(),t=t.replace(",)",")")):e},n=function(e){var t=i.normalizeColor(e);return t?parseInt(t.replace("#","0x"),16):0},l=function(e,t){var i="number"==typeof e?e:n(e);return s(i,t)},r=function(e){if("number"!=typeof e&&(e=parseInt(e,16)),isNaN(e)||e<0||e>16777215)return 0;var t=(16711680&e)>>16,i=(65280&e)>>8,s=255&e;return Math.round(.2126*t+.7152*i+.0722*s)},o=function(t){var i=e.trim(t.attr("fill")),s=function(e){var t=parseFloat(e);return t>=0&&t<=1?t:1};if(!/^rgba/.test(i))return s(t.attr("fill-opacity"));var a=i.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)$/);return a&&a.length>4?s(a[4]):1};return{colorFromHex:s,stripOutAlpha:a,hexFromColor:n,addAlphaToColor:l,getLuminance:r,getComputedOpacity:o}}.apply(t,s),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/MainBody":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/singlevalue/Labels"),i("views/shared/singlevalue/Delta"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],a=function(e,t,i,s,a,n,l,r,o,h,d){return s.extend({moduleId:i.id,className:"single-value-main-body",el:function(){return o.createElement("g").attr("class","single-value-main-body")},DELTA_PADDING:10,initialize:function(e){s.prototype.initialize.apply(this,arguments),this.model.presentation.set("deltaPadding",this.DELTA_PADDING)},reflow:function(){var e,t,i,s,a,n,l,r,o=this.model.presentation.get("edgePadding"),u=this.model.presentation.get("svgWidth")-2*o,c=this.model.presentation.get("scaleRatio"),g=this.model.presentation.get("mainBodyPadding"),p=g*c;h.valuesAreNumericAndFinite([p])&&this.$el.attr("transform","translate(0,"+p+")"),this.displayDelta()?(u-=this.DELTA_PADDING,this.maxLabelProportion||(i=this.children.labels.getMainLabelsWidth(),t=this.children.delta.el.getBBox().width,this.maxLabelProportion=d.roundToDecimal(i/(i+t),-2)),a=d.roundToDecimal(u*this.maxLabelProportion,-2),s=u-a,this.model.presentation.set("maxLabelsWidth",a),this.model.presentation.set("maxDeltaWidth",s)):(this.model.presentation.set("maxLabelsWidth",u),this.model.presentation.set("maxDeltaWidth",0)),this.children.labels.validateReflow(!0),this.displayDelta()?(this.children.delta.validateReflow(!0),t=this.children.delta.el.getBoundingClientRect().width,this.model.presentation.set("deltaWidth",t)):this.model.presentation.set("deltaWidth",0),this.children.labels.positionLabels(),this.displayDelta()&&(n=this.hasAfterLabel?this.children.labels.children.afterLabelView:this.children.labels.children.singleResultView,r=parseFloat(n.$("text").attr("x")),l=n.getWidth(),e=r+l,this.model.presentation.set("deltaLeft",e),this.children.delta.positionAndScaleElements())},drawLabels:function(){this.children.labels&&this.children.labels.remove();var e=this.model.state.get("display.visualizations.singlevalue.unit");if("undefined"==typeof e||""===e)this.hasUnit=!1,this.hasAfterLabel=!!this.model.state.get("display.visualizations.singlevalue.afterLabel"),this.hasBeforeLabel=!!this.model.state.get("display.visualizations.singlevalue.beforeLabel");else{this.hasUnit=!0;var t=this.model.state.get("display.visualizations.singlevalue.unitPosition");"before"===t?(this.unitPosition="before",this.hasBeforeLabel=!1,this.hasAfterLabel=!1):(this.unitPosition="after",this.hasBeforeLabel=!1,this.hasAfterLabel=!1)}this.children.labels=new a({model:{application:this.model.application,state:this.model.state,results:this.model.results,presentation:this.model.presentation},unit:e,unitPosition:this.unitPosition,hasUnit:this.hasUnit,hasBeforeLabel:this.hasBeforeLabel,hasAfterLabel:this.hasAfterLabel}),this.listenTo(this.children.labels,"singleDrilldownClicked",function(e){this.trigger("singleDrilldownClicked",e)}),this.listenTo(this.children.labels,"anchorTagClicked",function(e){this.trigger("anchorTagClicked",e)}),this.children.labels.render().appendTo(this.$el)},drawDelta:function(){this.children.delta&&(this.children.delta.detach(),this.children.delta.remove()),this.displayDelta()&&(this.children.delta=new n({model:{state:this.model.state,presentation:this.model.presentation,results:this.model.results}}),this.children.delta.render().appendTo(this.$el))},displayDelta:function(){var e=r.normalizeBoolean(this.model.state.get("display.visualizations.singlevalue.showTrendIndicator")),t=this.model.results.get("deltaValue");return e!==!1&&(t||0===t)},drawComponents:function(){this.drawLabels(),this.drawDelta()},render:function(){return this.drawComponents(),this}})}.apply(t,s),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/Labels":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/singlevalue/Label"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/math_utils")],a=function(e,t,i,s,a,n,l,r,o){return s.extend({moduleId:i.id,className:"single-value-labels",el:function(){return r.createElement("g").attr("class","single-value-labels")},LABEL_SIDE_PADDING:5,initialize:function(e){s.prototype.initialize.apply(this,arguments),this.activate(),this.unit=e.unit,this.unitPosition=e.unitPosition,this.hasUnit=e.hasUnit,this.hasAfterLabel=e.hasAfterLabel,this.hasBeforeLabel=e.hasBeforeLabel,this.originalSingleValueFontSize=this.model.presentation.get("singleValueFontSize"),this.originalSideLabelFontSize=this.model.presentation.get("sideLabelFontSize"),this.updateContainerDimensions()},reflow:function(){this.updateContainerDimensions(),this.scaleLabels()},updateContainerDimensions:function(){this.scaleRatio=this.model.presentation.get("scaleRatio"),this.singleValueFontSize=this.originalSingleValueFontSize*this.scaleRatio,this.labelFontSize=this.originalSideLabelFontSize*this.scaleRatio},constructMainLabelData:function(){var e,t=this.model.presentation.get("fontColor"),i="display.visualizations.singlevalue.beforeLabel",s="display.visualizations.singlevalue.afterLabel";return e={singleResultData:{labelFontSize:this.originalSingleValueFontSize,labelFontColor:t,labelGroupClass:"single-result-group",labelClass:"single-result",linkField:"result",configName:"display.visualizations.singlevalue.singleResult",useResultField:!0,fontWeight:"bold",unit:this.unit,unitPosition:this.unitPosition,hasUnit:this.hasUnit,exportMode:!!this.model.state.get("exportMode")}},this.hasBeforeLabel&&(e.beforeLabelData={labelFontSize:this.originalSideLabelFontSize,labelFontColor:t,labelGroupClass:"before-label-group",labelClass:"before-label",linkField:"beforelabel",configName:i,useResultField:!1,fontWeight:"normal"}),this.hasAfterLabel&&(e.afterLabelData={labelFontSize:this.originalSideLabelFontSize,labelFontColor:t,labelGroupClass:"after-label-group",labelClass:"after-label",linkField:"afterlabel",configName:s,useResultField:!1,fontWeight:"normal"}),e},getMainLabelsWidth:function(){var e=0;return this.hasBeforeLabel&&(e+=this.children.beforeLabelView.getWidth(),e+=this.LABEL_SIDE_PADDING),this.hasAfterLabel&&(e+=this.children.afterLabelView.getWidth(),e+=this.LABEL_SIDE_PADDING),e+=this.children.singleResultView.getWidth()},positionLabels:function(){var e,t,i,s=0,a=this.children.singleResultView.getLabelElement(),n=s,l=s,r=0,h=this.children.singleResultView.getWidth(),d=this.getMainLabelsWidth(),u=this.model.presentation.get("deltaWidth")||0,c=this.model.presentation.get("svgWidth");u>0&&(u+=this.model.presentation.get("deltaPadding")),s=o.roundToDecimal(c/2-(d+u)/2,-2),this.hasBeforeLabel?(i=this.children.beforeLabelView.getWidth(),e=this.children.beforeLabelView.getLabelElement(),n=s,l=i+n+this.LABEL_SIDE_PADDING,e.attr("x",n)):l=s,a.attr("x",l),this.hasAfterLabel&&(t=this.children.afterLabelView.getLabelElement(),r=l+h+this.LABEL_SIDE_PADDING,t.attr("x",r))},scaleLabels:function(){var e,t,i,s,a=this.children.singleResultView.getLabelElement(),n=this.model.presentation.get("maxLabelsWidth");this.defaultMainLabelsWidth||(this.defaultMainLabelsWidth=this.getMainLabelsWidth()),a.css("font-size",this.singleValueFontSize),(this.model.state.get("exportMode")||0!==this.children.singleResultView.getWidth())&&(this.hasBeforeLabel&&(e=this.children.beforeLabelView.getLabelElement(),e.css("font-size",this.labelFontSize)),this.hasAfterLabel&&(t=this.children.afterLabelView.getLabelElement(),t.css("font-size",this.labelFontSize)),i=this.getMainLabelsWidth(),i>n&&(s=o.roundToDecimal(n/this.defaultMainLabelsWidth,-4),this.singleValueFontSize=o.roundToDecimal(this.originalSingleValueFontSize*s,-4),this.labelFontSize=o.roundToDecimal(this.originalSideLabelFontSize*s,-4),a.css("font-size",this.singleValueFontSize),this.hasBeforeLabel&&(e=this.children.beforeLabelView.getLabelElement(),e.css("font-size",this.labelFontSize)),this.hasAfterLabel&&(t=this.children.afterLabelView.getLabelElement(),t.css("font-size",this.labelFontSize))))},createLabel:function(e,i,s,n,l){this.children[n]&&(this.children[n].detach(),this.children[n].remove()),this.children[n]=new a(t.extend(s,i[l])),this.children[n].render().appendTo(e),this.listenTo(this.children[n],"singleDrilldownClicked",function(e){this.trigger("singleDrilldownClicked",e)}),this.listenTo(this.children[n],"anchorTagClicked",function(e){this.trigger("anchorTagClicked",e)})},render:function(){var e=this.$el.find(".main-label-group"),t=this.constructMainLabelData(),i={model:{state:this.model.state,results:this.model.results,presentation:this.model.presentation,application:this.model.application}};return e.length>0&&e.remove(),e=r.createElement("g").attr("class","main-label-group"),this.$el.append(e),this.hasBeforeLabel&&this.createLabel(e,t,i,"beforeLabelView","beforeLabelData"),this.createLabel(e,t,i,"singleResultView","singleResultData"),this.hasAfterLabel&&this.createLabel(e,t,i,"afterLabelView","afterLabelData"),this}})}.apply(t,s),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/Label":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("uri/route"),i("util/numeral")],a=function(e,t,i,s,a,n,l,r,o,h){var d=function(e,i){if(t.isFunction(e))try{e=e(i)}catch(e){return""}return e};return s.extend({moduleId:i.id,className:"single-value-label",el:function(){return l.createElement("g").attr({class:"single-value-label","data-name":this.options.configName})},initialize:function(e){if(s.prototype.initialize.apply(this,arguments),this.activate(),this.LABEL_FONT_SIZE=this.options.labelFontSize,this.labelFontColor=this.options.labelFontColor,this.labelGroupClass=this.options.labelGroupClass,this.labelClass=this.options.labelClass,this.linkField=this.options.linkField,this.resultFieldValue=this.model.results.get("resultFieldValue"),this.configName=this.options.configName,this.unit=this.options.unit,this.unitPosition=this.options.unitPosition,this.hasUnit=this.options.hasUnit,this.isNumericLabelValue=!1,this.options.useResultField)if(isNaN(this.resultFieldValue))this.labelValue=this.resultFieldValue;else{var t=this.model.presentation.get("formatPattern");this.labelValue=h(this.resultFieldValue).format(t),this.isNumericLabelValue=!0}else this.labelValue=d(this.model.state.get(this.configName)||"",this.resultFieldValue);this.fontWeight=this.options.fontWeight,this.labelOpacity=this.options.labelOpacity,this.exportMode=this.options.exportMode},events:{"click a.single-drilldown":function(i){i.preventDefault();var s=e(i.currentTarget),a=this.model.results.get("searchResultsColumn"),l=a.get("fields");t.isObject(l[0])&&(l=t(l).pluck("name"));var r=t.object(t(l).map(function(e){return"row."+e}),t(a.get("columns")).map(function(e){return t(e).last()})),o={name:s.data("field"),value:s.data("value"),rowContext:r,originalEvent:i,type:"cell"};if(this.model.results.has("sparklineData")){var h=t(l).indexOf("_time"),d=t(l).indexOf("_span"),u=a.get("columns"),c=n.getEpochTimeFromISO(t(u[h]).last()),g=parseFloat(t(u[d]).last());o.name2=o.name,o.value2=o.value,o.name="_time",o.value=c,o._span=g,o.rowContext["row._time"]=c,o.rowContext["row._span"]=g}var p=t(s.children("text").attr("class").split(" ")).map(function(e){return"click:"+e}).join(" ");this.trigger("singleDrilldownClicked",{specificEventNames:"click drilldown "+p,drilldownInfo:o})},"click a.link-drilldown":function(e){e.preventDefault(),this.trigger("anchorTagClicked",e)}},constructLabelData:function(){var e;this.model.presentation.get("severityColor");return e={name:this.labelClass,linkField:this.linkField,value:this.labelValue,fontSize:this.LABEL_FONT_SIZE+"px",fontWeight:this.fontWeight,fontColor:this.labelFontColor,opacity:this.labelOpacity||1}},drawLabel:function(e,t){var i,s,a;i=l.createElement("g").attr("class","svg-label"),s=l.createElement("text").attr({x:t.x,y:t.y,class:t.name}).css({"letter-spacing":this.isNumericLabelValue?"-0.02em":"normal","font-size":t.fontSize,"font-weight":t.fontWeight,fill:t.fontColor,opacity:t.opacity});var n=""+t.value;if(this.hasUnit&&"before"===this.unitPosition)if(/^\-\d/.test(n)&&(s.append(document.createTextNode("-")),n=n.substring(1)),this.exportMode)n=""+this.unit+n;else{var r=l.createElement("tspan").attr({class:t.name+"-unit"}).css({"letter-spacing":"normal"}).text(""+this.unit);s.append(r)}if(s.append(document.createTextNode(n)),this.hasUnit&&"after"===this.unitPosition)if(this.exportMode)s.append(document.createTextNode(" "+this.unit));else{var o=l.createElement("tspan").attr({class:t.name+"-unit"}).css({"letter-spacing":"normal"}).text(" "+this.unit);s.append(o)}t.link?(a=l.createElement("a").attr({href:t.link.attr("href"),class:t.link.attr("class")}).css({"text-decoration":"none"}),a.data("value",t.value),a.data("field",t.linkField),a.append(s),i.append(a),s.hover(function(e){s.css({"text-decoration":"mouseenter"===e.type?"underline":"none"})})):i.append(s),e.append(i),this.labelElement=this.getLabelElement()},getWidth:function(){return this.getBBox(this.labelElement).width},getLeftX:function(e){return parseInt(e.attr("x"),10)},getBBox:function(e){var t;try{t=e[0].getBBox()}catch(e){t={x:0,y:0,width:0,height:0}}return t},getRightX:function(e){return this.getLeftX(e)+this.getWidth(e)},getClientRect:function(e){return e[0].getBoundingClientRect()},getLabelElement:function(){var e=this.$("."+this.labelClass);if(e.length>0)return e},wrapLinks:function(i,s){if(this.model.application){var a=this.model.state.get("display.visualizations.singlevalue.linkFields");a=a?e.trim(a).split(/\s*,\s*/):[];var l,r=this.model.state.get("display.visualizations.singlevalue.linkView"),h=this.model.state.get("display.visualizations.singlevalue.linkSearch"),d=this.model.state.get("display.visualizations.singlevalue.drilldown")||"none",u=this.model.application.toJSON();if("search"!==r&&a.length||h){var c;if(r){var g=h?{q:h}:void 0;c="/"===r.charAt(0)?n.make_full_url(r,g):o.page(u.root,u.locale,u.app,r,{data:g})}else c=o.search(u.root,u.locale,u.app,{data:{q:h}});l=e('<a class="link-drilldown" />').attr("href",c)}else"none"!==d&&(l=e('<a class="single-drilldown" href="#"></a>'),t(a).contains("result")||a.push("result"));return l?(l.data({field:i,value:s}),{linkFields:a,link:l}):void 0}},render:function(){var e,i=this.constructLabelData(),s=this.model.results.get("resultFieldValue"),a=this.wrapLinks(this.model.results.get("resultField"),s);return a&&t.each(a.linkFields,function(e){this.linkField===e&&(i.link=a.link)},this),e=this.$el.find("."+this.labelGroupClass),e.length>0&&e.remove(),e=l.createElement("g").attr("class",this.labelGroupClass),this.$el.append(e),this.drawLabel(e,i),this}})}.apply(t,s),!(void 0!==a&&(e.exports=a))},"util/numeral":function(e,t,i){var s,a;s=[i("stubs/i18n"),i("shim/numeral")],a=function(e,t){var i=e.numeral_install,s={de_DE:"de",en_DEBUG:"en-debug",en_GB:"en-gb",en_US:"en-us",it_IT:"it",ko_KR:"ko",zh_CN:"chs",zh_TW:"chs-traditional"};return"function"==typeof i&&(i(t),t.language(s[e.locale_name()])),t}.apply(t,s),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/Sparkline":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],a=function(e,t,i,s,a,n,l,r){return s.extend({moduleId:i.id,className:"single-value-sparkline",el:function(){return n.createElement("g").attr("class","single-value-sparkline")},SPARKLINE_WIDTH:150,SPARKLINE_HEIGHT:14,SPARKLINE_Y:77,DEFAULT_SPARKLINE_COLOR:"#000000",initialize:function(e){s.prototype.initialize.apply(this,arguments),this.sparklineColor=this.model.presentation.get("sparklineColor"),this.activate()},drawSparkline:function(){var e=this.model.presentation.get("sparklineOpacity")||1,i=1,s=this.model.results.get("sparklineData"),a=this.model.results.get("deltaBacktrack");if(this.$el.empty(),s&&!(s.length<2)){var l=[],r=1/0,o=-(1/0),h=1/0,d=-(1/0);t.each(s,function(e){var t=i++,s=parseFloat(e)||0;r=Math.min(t,r),o=Math.max(t,o),h=Math.min(s,h),d=Math.max(s,d),l.push({x:t,y:s})});var u=this.SPARKLINE_WIDTH,c=this.SPARKLINE_HEIGHT;if(t.each(l,function(e,t){e.x=u*((e.x-r)/Math.max(o-r,1)),e.y=c*(1-(e.y-h)/Math.max(d-h,1))}),a>0&&this.displayDeltaRange()){var g=l.length-1,p=Math.max(g-a,0);n.createElement("path").attr("class","sparkline").attr("d",this.pointsToPath(l.slice(0,p+1))).attr("fill","none").attr("stroke",this.sparklineColor).attr("opacity",.6*e).attr("stroke-width","1px").attr("stroke-linecap","round").attr("stroke-linejoin","round").appendTo(this.$el),n.createElement("path").attr("class","sparkline-delta").attr("d",this.pointsToPath(l.slice(p,g+1))).attr("fill","none").attr("stroke",this.sparklineColor).attr("opacity",e).attr("stroke-width","1.5px").attr("stroke-linecap","round").attr("stroke-linejoin","round").appendTo(this.$el);var f=l[p];n.createElement("circle").attr("class","sparkline-point").attr("cx",f.x).attr("cy",f.y).attr("r",2).attr("fill",this.sparklineColor).attr("stroke","none").attr("opacity",e).appendTo(this.$el)}else n.createElement("path").attr("class","sparkline").attr("d",this.pointsToPath(l)).attr("fill","none").attr("stroke",this.sparklineColor).attr("opacity",e).attr("stroke-width","1.5px").attr("stroke-linecap","round").attr("stroke-linejoin","round").appendTo(this.$el);
var m=l[l.length-1];n.createElement("circle").attr("class","sparkline-point").attr("cx",m.x).attr("cy",m.y).attr("r",2).attr("fill",this.sparklineColor).attr("stroke","none").attr("opacity",e).appendTo(this.$el)}},positionAndScaleSparkline:function(){var e,t,i,s,a,n=r.roundToDecimal((this.svgWidth/2-this.sparklineWidth/2)/this.scaleRatio,-2),o=this.SPARKLINE_Y,h=this.model.presentation.get("edgePadding"),d=this.svgWidth-2*h;this.sparklineWidth<d?l.valuesAreNumericAndFinite([this.scaleRatio,n,o])&&this.$el.attr({transform:"scale("+this.scaleRatio+")translate("+n+","+o+")"}):(i=r.roundToDecimal(d/this.SPARKLINE_WIDTH,-2),s=r.roundToDecimal(h/i,-2),e=r.roundToDecimal(this.svgHeight/this.scaleRatio,-2),t=e*i,a=r.roundToDecimal(o+(this.svgHeight-t)/i,-2),l.valuesAreNumericAndFinite([i,s,a])&&this.$el.attr({transform:"scale("+i+")translate("+s+","+a+")"}))},pointsToPath:function(e){for(var t,i="",s=0,a=e.length;s<a;s++)t=e[s],i+=0===s?"M":"L",i+=t.x+","+t.y;return i},displayDeltaRange:function(){var e=a.normalizeBoolean(this.model.state.get("display.visualizations.singlevalue.showTrendIndicator")),t=this.model.results.get("deltaValue");return e!==!1&&null!=t},reflow:function(){this.updateContainerDimensions(),this.positionAndScaleSparkline()},updateContainerDimensions:function(){this.svgWidth=this.model.presentation.get("svgWidth"),this.svgHeight=this.model.presentation.get("svgHeight"),this.scaleRatio=this.model.presentation.get("scaleRatio"),this.sparklineWidth=this.SPARKLINE_WIDTH*this.scaleRatio},render:function(){return this.drawSparkline(),this}})}.apply(t,s),!(void 0!==a&&(e.exports=a))},153:function(e,t,i){var s,a;(function(){/*!
	 * numeral.js
	 * version : 1.5.3
	 * author : Adam Draper
	 * license : MIT
	 * http://adamwdraper.github.com/Numeral-js/
	 */
(function(){function i(e){this._value=e}function n(e,t,i,s){var a,n,l=Math.pow(10,t);return n=(i(e*l)/l).toFixed(t),s&&(a=new RegExp("0{1,"+s+"}$"),n=n.replace(a,"")),n}function l(e,t,i){var s;return s=t.indexOf("$")>-1?o(e,t,i):t.indexOf("%")>-1?h(e,t,i):t.indexOf(":")>-1?d(e,t):c(e._value,t,i)}function r(e,t){var i,s,a,n,l,r=t,o=["KB","MB","GB","TB","PB","EB","ZB","YB"],h=!1;if(t.indexOf(":")>-1)e._value=u(t);else if(t===y)e._value=0;else{for("."!==b[L].delimiters.decimal&&(t=t.replace(/\./g,"").replace(b[L].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+b[L].abbreviations.thousand+"(?:\\)|(\\"+b[L].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+b[L].abbreviations.million+"(?:\\)|(\\"+b[L].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+b[L].abbreviations.billion+"(?:\\)|(\\"+b[L].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+b[L].abbreviations.trillion+"(?:\\)|(\\"+b[L].currency.symbol+")?(?:\\))?)?$"),l=0;l<=o.length&&!(h=t.indexOf(o[l])>-1&&Math.pow(1024,l+1));l++);e._value=(h?h:1)*(r.match(i)?Math.pow(10,3):1)*(r.match(s)?Math.pow(10,6):1)*(r.match(a)?Math.pow(10,9):1)*(r.match(n)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=h?Math.ceil(e._value):e._value}return e._value}function o(e,t,i){var s,a,n=t.indexOf("$"),l=t.indexOf("("),r=t.indexOf("-"),o="";return t.indexOf(" $")>-1?(o=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(o=" ",t=t.replace("$ ","")):t=t.replace("$",""),a=c(e._value,t,i),n<=1?a.indexOf("(")>-1||a.indexOf("-")>-1?(a=a.split(""),s=1,(n<l||n<r)&&(s=0),a.splice(s,0,b[L].currency.symbol+o),a=a.join("")):a=b[L].currency.symbol+o+a:a.indexOf(")")>-1?(a=a.split(""),a.splice(-1,0,o+b[L].currency.symbol),a=a.join("")):a=a+o+b[L].currency.symbol,a}function h(e,t,i){var s,a="",n=100*e._value;return t.indexOf(" %")>-1?(a=" ",t=t.replace(" %","")):t=t.replace("%",""),s=c(n,t,i),s.indexOf(")")>-1?(s=s.split(""),s.splice(-1,0,a+"%"),s=s.join("")):s=s+a+"%",s}function d(e){var t=Math.floor(e._value/60/60),i=Math.floor((e._value-60*t*60)/60),s=Math.round(e._value-60*t*60-60*i);return t+":"+(i<10?"0"+i:i)+":"+(s<10?"0"+s:s)}function u(e){var t=e.split(":"),i=0;return 3===t.length?(i+=60*Number(t[0])*60,i+=60*Number(t[1]),i+=Number(t[2])):2===t.length&&(i+=60*Number(t[0]),i+=Number(t[1])),Number(i)}function c(e,t,i){var s,a,l,r,o,h,d=!1,u=!1,c=!1,g="",p=!1,f=!1,m=!1,v=!1,x=!1,w="",C="",T=Math.abs(e),D=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],_="",k=!1;if(0===e&&null!==y)return y;if(t.indexOf("(")>-1?(d=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(u=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(p=t.indexOf("aK")>=0,f=t.indexOf("aM")>=0,m=t.indexOf("aB")>=0,v=t.indexOf("aT")>=0,x=p||f||m||v,t.indexOf(" a")>-1?(g=" ",t=t.replace(" a","")):t=t.replace("a",""),T>=Math.pow(10,12)&&!x||v?(g+=b[L].abbreviations.trillion,e/=Math.pow(10,12)):T<Math.pow(10,12)&&T>=Math.pow(10,9)&&!x||m?(g+=b[L].abbreviations.billion,e/=Math.pow(10,9)):T<Math.pow(10,9)&&T>=Math.pow(10,6)&&!x||f?(g+=b[L].abbreviations.million,e/=Math.pow(10,6)):(T<Math.pow(10,6)&&T>=Math.pow(10,3)&&!x||p)&&(g+=b[L].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(w=" ",t=t.replace(" b","")):t=t.replace("b",""),l=0;l<=D.length;l++)if(s=Math.pow(1024,l),a=Math.pow(1024,l+1),e>=s&&e<a){w+=D[l],s>0&&(e/=s);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(C=" ",t=t.replace(" o","")):t=t.replace("o",""),C+=b[L].ordinal(e)),t.indexOf("[.]")>-1&&(c=!0,t=t.replace("[.]",".")),r=e.toString().split(".")[0],o=t.split(".")[1],h=t.indexOf(","),o?(o.indexOf("[")>-1?(o=o.replace("]",""),o=o.split("["),_=n(e,o[0].length+o[1].length,i,o[1].length)):_=n(e,o.length,i),r=_.split(".")[0],_=_.split(".")[1].length?b[L].delimiters.decimal+_.split(".")[1]:"",c&&0===Number(_.slice(1))&&(_="")):r=n(e,null,i),r.indexOf("-")>-1&&(r=r.slice(1),k=!0),h>-1&&(r=r.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+b[L].delimiters.thousands)),0===t.indexOf(".")&&(r=""),(d&&k?"(":"")+(!d&&k?"-":"")+(!k&&u?"+":"")+r+_+(C?C:"")+(g?g:"")+(w?w:"")+(d&&k?")":"")}function g(e,t){b[e]=t}function p(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function f(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var i=p(e),s=p(t);return i>s?i:s},-(1/0))}var m,v="1.5.3",b={},L="en",y=null,x="0,0",w="undefined"!=typeof e&&e.exports;m=function(e){return m.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=m.fn.unformat(e)),new i(Number(e))},m.version=v,m.isNumeral=function(e){return e instanceof i},m.language=function(e,t){if(!e)return L;if(e&&!t){if(!b[e])throw new Error("Unknown language : "+e);L=e}return!t&&b[e]||g(e,t),m},m.languageData=function(e){if(!e)return b[L];if(!b[e])throw new Error("Unknown language : "+e);return b[e]},m.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),m.zeroFormat=function(e){y="string"==typeof e?e:null},m.defaultFormat=function(e){x="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,s,a=this.length>>>0,n=!1;for(1<arguments.length&&(s=t,n=!0),i=0;a>i;++i)this.hasOwnProperty(i)&&(n?s=e(s,this[i],i,this):(s=this[i],n=!0));if(!n)throw new TypeError("Reduce of empty array with no initial value");return s}),m.fn=i.prototype={clone:function(){return m(this)},format:function(e,t){return l(this,e?e:x,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:r(this,e?e:x)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t,s,a){return e+i*t}var i=f.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/i,this},subtract:function(e){function t(e,t,s,a){return e-i*t}var i=f.call(null,this._value,e);return this._value=[e].reduce(t,this._value*i)/i,this},multiply:function(e){function t(e,t,i,s){var a=f(e,t);return e*a*(t*a)/(a*a)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t,i,s){var a=f(e,t);return e*a/(t*a)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(m(this._value).subtract(e).value())}},w&&(e.exports=m),"undefined"==typeof ender&&(this.numeral=m),s=[],a=function(){return m}.apply(t,s),!(void 0!==a&&(e.exports=a))}).call(this)}).call(window)},"views/shared/singlevalue/Delta":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],a=function(e,t,i,s,a,n,l){return s.extend({moduleId:i.id,className:"single-value-delta",el:function(){return a.createElement("g").attr("class","single-value-delta")},SVG_POINTS:{decrease:{polylinePoints:"20.5,3 20.5,20.5 3,20.5",linePoints:[20.2,20.9,3.4,4]},increase:{polylinePoints:"20.5,21 20.5,3.5 3,3.5",linePoints:[20.2,3.3,3.4,20.2]},noChange:{polylinePoints:"14.8,20.2 23.8,11.2 14.8,2.2",linePoints:[0,11.2,23,11.2]}},INDICATOR_WIDTH:22,initialize:function(e){s.prototype.initialize.apply(this,arguments),this.updateContainerDimensions(),this.activate()},drawComponents:function(){var e=this.model.state.get("display.visualizations.singlevalue.trendDisplayMode");this.deltaValue=this.model.results.get("deltaValue"),this.formattedDeltaValue=this.model.results.get("formattedDeltaValue"),this.deltaValue&&0!==this.deltaValue?"percentageDecrease"===this.deltaValue||this.deltaValue<0?(this.indicatorMode="decrease",this.indicatorClass="delta-down-indicator"):("percentageIncrease"===this.deltaValue||this.deltaValue>0)&&(this.indicatorMode="increase",this.indicatorClass="delta-up-indicator"):(this.indicatorMode="noChange",this.indicatorClass="delta-no-change-indicator"),this.indicatorColor=this.model.presentation.get("deltaColor"),isNaN(this.deltaValue)||this.deltaValue===1/0||this.deltaValue===-(1/0)?this.formattedDeltaValue="N/A":e&&"percent"===e.toLowerCase()&&(this.formattedDeltaValue+="%"),this.drawLabel(),this.drawIndicator()},drawIndicator:function(){var e=a.createElement("g").attr({class:"delta-indicator "+this.indicatorClass}),t=this.SVG_POINTS[this.indicatorMode],i=a.createElement("polyline").attr({points:t.polylinePoints,fill:"none",stroke:this.indicatorColor,"stroke-width":"5px"}),s=a.createElement("line").attr({x1:t.linePoints[0],y1:t.linePoints[1],x2:t.linePoints[2],y2:t.linePoints[3],fill:this.indicatorColor,stroke:this.indicatorColor,"stroke-width":"5px"});e.append(i),e.append(s),this.$el.append(e)},drawLabel:function(){var e=a.createElement("text").attr({class:"delta-label"}).text(this.formattedDeltaValue).css({"font-size":this.model.presentation.get("deltaFontSize"),fill:this.indicatorColor,fontWeight:"bold"});this.$el.append(e)},updateContainerDimensions:function(){this.scaleRatio=this.model.presentation.get("scaleRatio")},positionAndScaleElements:function(){var e,t,i,s,a,r=this.$el.find(".delta-label"),o=this.$el.find(".delta-indicator"),h=this.model.presentation.get("deltaScale"),d=this.INDICATOR_WIDTH*h,u=this.model.presentation.get("deltaLeft")||0,c=-45,g=this.model.presentation.get("maxDeltaWidth");this.defaultDeltaWidth||(this.defaultDeltaWidth=this.getDeltaWidth()),this.defaultLabelWidth||(this.defaultLabelWidth=r[0].getBBox().width),s=(u+10)/this.scaleRatio,e=this.defaultLabelWidth,i=l.roundToDecimal(e/2-d/2,-2),n.valuesAreNumericAndFinite([this.scaleRatio,i,c,s])&&(o.attr({transform:"scale("+h+")translate("+i+","+c+")"}),this.$el.attr({transform:"scale("+this.scaleRatio+")translate("+s+")"})),t=this.getDeltaWidth(),t>g&&(a=l.roundToDecimal(g/this.defaultDeltaWidth,-2),s=(u+10)/a,n.valuesAreNumericAndFinite([a,s])&&this.$el.attr({transform:"scale("+a+")translate("+s+")"}))},getDeltaWidth:function(){return this.el.getBoundingClientRect().width},reflow:function(){this.updateContainerDimensions(),this.positionAndScaleElements()},render:function(){return this.drawComponents(),this}})}.apply(t,s),!(void 0!==a&&(e.exports=a))},"views/shared/singlevalue/UnderLabel":function(e,t,i){var s,a;s=[i("shim/jquery"),i("require/underscore"),e,i("views/Base"),i("views/shared/singlevalue/Label"),i("models/Base"),i("shim/splunk.util"),i("util/svg"),i("util/general_utils"),i("util/math_utils")],a=function(e,t,i,s,a,n,l,r,o,h){return s.extend({moduleId:i.id,className:"single-value-under-label",initialize:function(e){s.prototype.initialize.apply(this,arguments)},el:function(){return r.createElement("g").attr("class","single-value-under-label")},LABEL_FONT_SIZE:12,createUnderLabel:function(){this.children.underLabel&&(this.children.underLabel.detach(),this.children.underLabel.remove()),this.children.underLabel=new a({model:{state:this.model.state,results:this.model.results,presentation:this.model.presentation,application:this.model.application},labelFontSize:this.LABEL_FONT_SIZE,labelFontColor:this.model.presentation.get("underLabelColor"),labelGroupClass:"under-label-group",labelClass:"under-label",linkField:"underlabel",configName:"display.visualizations.singlevalue.underLabel",useResultField:!1,labelOpacity:this.model.presentation.get("underLabelOpacity"),fontWeight:"normal"}),this.listenTo(this.children.underLabel,"singleDrilldownClicked",function(e){this.trigger("singleDrilldownClicked",e)}),this.listenTo(this.children.underLabel,"anchorTagClicked",function(e){this.trigger("anchorTagClicked",e)})},reflow:function(){this.updateContainerDimensions(),this.positionAndScaleUnderLabel()},updateContainerDimensions:function(){this.svgWidth=this.model.presentation.get("svgWidth"),this.svgHeight=this.model.presentation.get("svgHeight"),this.scaleRatio=this.model.presentation.get("scaleRatio"),this.UNDER_LABEL_WIDTH=this.children.underLabel.getWidth()},positionAndScaleUnderLabel:function(){if(this.UNDER_LABEL_WIDTH){var e=h.roundToDecimal(this.svgWidth/2-this.UNDER_LABEL_WIDTH/2,-2),t=this.model.presentation.get("underLabelY")*this.scaleRatio;o.valuesAreNumericAndFinite([e,t])&&this.$el.attr({transform:"translate("+e+","+t+")"})}},render:function(){return this.createUnderLabel(),this.children.underLabel.render().appendTo(this.$el),this}})}.apply(t,s),!(void 0!==a&&(e.exports=a))},"js_charting/util/parsing_utils":function(e,t,i){var s,a;s=[i("require/underscore"),i("shim/splunk.util"),i("js_charting/util/color_utils")],a=function(e,t,i){var s=function(i,s){return e(i).isUndefined()?!!s:t.normalizeBoolean(i)},a=function(t){if(!t)return!1;var i,s,a,n,h={};t=l(t);var d=t.length;if("{"!==t.charAt(0)||"}"!==t.charAt(d-1))return!1;if(/^\{\s*\}$/.test(t))return{};for(t=t.substr(1,d-2),s=r(t,","),i=0;i<s.length;i++)a=r(s[i],":"),n=l(a[0]),'"'===n[0]&&(n=n.substring(1)),'"'===e(n).last()&&(n=n.substring(0,n.length-1)),n=o(n,["{","}","[","]","(",")",",",":",'"']),h[n]=l(a[1]);return h},n=function(e){if(!e)return!1;e=l(e);var i=e.length;return"["===e.charAt(0)&&"]"===e.charAt(i-1)&&(/^\[\s*\]$/.test(e)?[]:(e=e.substr(1,i-2),t.stringToFieldList(e)))},l=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},r=function(t,i,s){s=s||"\\";var a=t.split(i),n=[a.shift()];return e(a).each(function(t){var a=e(n).last();e(a).last()===s?n[n.length-1]+=i+t:n.push(t)}),n},o=function(t,i){return e(i).each(function(e){var i=new RegExp("\\\\\\"+e,"g");t=t.replace(i,e)}),t},h=function(e){return t.escapeHtml(e)},d=function(e){return(""+e).replace(/</g,"&lt;").replace(/>/g,"&gt;")},u=function(t){return e.isNumber(t)?t:"#"===t.substring(0,1)?i.hexFromColor(t):parseInt(t,16)},c=function(e){var t,i,s;try{s=JSON.parse(e)}catch(t){s=n(e)}if(!s)return!1;for(t=0;t<s.length;t++){if(i=u(s[t]),isNaN(i))return!1;s[t]=i}return s},g=function(t){var i;try{i=JSON.parse(t)}catch(e){i=a(t)}if(!i)return!1;var s={};return e(i).each(function(e,t){s[t]=u(e)||0}),s},p=function(e,t){if(!(e instanceof Array&&t instanceof Array))return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},f=function(t){var i={},s=y(t,/legend[.]/);return e(s).each(function(e,t){i[t.replace(/^legend[.]/,"")]=e}),i},m=function(e){var t,i,s={},a=y(e,/(axisX|primaryAxis|axisLabelsX|axisTitleX|gridLinesX)/);for(t in a)a.hasOwnProperty(t)&&(v(t,e)||(i=t.replace(/(axisX|primaryAxis)/,"axis"),i=i.replace(/axisLabelsX/,"axisLabels"),i=i.replace(/axisTitleX/,"axisTitle"),i=i.replace(/gridLinesX/,"gridLines"),s[i]=a[t]));return s},v=function(e,t){return!!/primaryAxis/.test(e)&&(/primaryAxisTitle/.test(e)?t[e.replace(/primaryAxisTitle/,"axisTitleX")]:t[e.replace(/primaryAxis/,"axisX")])},b=function(e,i){var s,a,n,l,r={};if(i=(e&&t.normalizeBoolean(e["layout.splitSeries"])?0:i)||0,0===i)n=y(e,/(axisY[^2]|secondaryAxis|axisLabelsY(?!2.*|\.majorLabelStyle\.rotation|\.majorLabelStyle\.overflowMode)|axisTitleY[^2]|gridLinesY[^2])/);else{if(1!==i)throw new Error("Axis index must be 0 or 1");n=y(e,/(axisY2(?!\.enabled)|axisLabelsY2(?!\.majorLabelStyle\.rotation|\.majorLabelStyle\.overflowMode)|axisTitleY2|gridLinesY2)/),l=t.normalizeBoolean(n["gridLinesY2.showMajorLines"]),n["axisY2.scale"]&&"inherit"!==n["axisY2.scale"]||(n["axisY2.scale"]=e?e["axisY.scale"]||"linear":"linear"),"boolean"!=typeof l&&(n["gridLinesY2.showMajorLines"]=0),n["axisLabelsY2.extendsAxisRange"]=!e||(e["axisLabelsY.extendsAxisRange"]||!0)}for(s in n)n.hasOwnProperty(s)&&(L(s,e)||(a=s.replace(/(axisY2|axisY|secondaryAxis)/,"axis"),a=a.replace(/axisLabelsY2|axisLabelsY/,"axisLabels"),a=a.replace(/axisTitleY2|axisTitleY/,"axisTitle"),a=a.replace(/gridLinesY2|gridLinesY/,"gridLines"),r[a]=n[s]));return r},L=function(e,t){return!!/secondaryAxis/.test(e)&&(/secondaryAxisTitle/.test(e)?t[e.replace(/secondaryAxisTitle/,"axisTitleY")]:t[e.replace(/secondaryAxis/,"axisY")])},y=function(e,t){if(!(t instanceof RegExp))return e;var i,s={};for(i in e)e.hasOwnProperty(i)&&t.test(i)&&(s[i]=e[i]);return s},x=function(t){var i,s=[-90,-45,0,45,90],a=0;return i=parseInt(t,10),e.indexOf(s,i)===-1?a:i};return{normalizeBoolean:s,stringToObject:a,stringToArray:n,trimWhitespace:l,escapeSafeSplit:r,unescapeChars:o,escapeHtml:h,escapeSVG:d,stringToHexArray:c,stringToHexObject:g,arraysAreEquivalent:p,getLegendProperties:f,getXAxisProperties:m,xAxisKeyIsTrumped:v,getYAxisProperties:b,yAxisKeyIsTrumped:L,filterPropsByRegex:y,getRotation:x}}.apply(t,s),!(void 0!==a&&(e.exports=a))},"shim/numeral":function(e,t,i){var s,a;s=[i(153)],a=function(e){return e}.apply(t,s),!(void 0!==a&&(e.exports=a))}});